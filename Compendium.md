# Информация по работе с GIT

## Установка и первоначальная настройка  
Установим Ubuntu на Windows через WSL

Ставим GIT на Ubuntu   
`sudo apt update`  
`sudo apt install git-all`

Проверяем что все установлено `git --version`

Настраиваем имя и фамилию для отслеживания изменений  
`git config --global user.name "ФИО"`  
`git config --global user.email "mail"`

Регистрируем аккаунт  
Добавляем в настройках ключ SSH  
Создание ключа `ssh-keygen -t ed25519 -C "mail"`

Запуск агента который следит за ключами `eval "$(ssh-agent -S)"`

Добавление нового ключа в агент `ssh-add ~/.ssh/id_ed25519`

Выводим содержимое ключа и копируем `cat ~/.ssh/id_ed25519.pub`

Добавляем ключ в аккаунт  
Проверяем что ключ работает `ssh -T git@github.com`

## Рабочий процесс  
Поместить директорию под контроль версий `git init`

Создаем новый проект `mkdir new_project`

Переходим в созданную директорию `cd new_project`

Выполняем инициализацию `git init`

Посмотреть статус `git status`

Добавить файлы  
`echo "Hello world" > README.md`  
`echo "Serg" > PEOPLE.md`

Снова смотрим статус `git status`

Видим что появились файлы но они помечены как неотслеживаемые. Добавление в репозитория происходит в 2 шага `git add README.md`

Смотрим статус `git status`

Видим, что README теперь в состоянии подготовлен к коммиту, другими словами попал в индекс  
Следующий шаг это коммит. Это означает окончательное добавление в репозитория и GIT  навсегда запоминает файл и следит за всеми последующими изменениями  
Во время коммита мы берем все подготовленные изменения (любое кол-во файлов) и отправляем в репозиторий, как единое целое  
`git commit -m 'add README.md`  
Флаг -m означает message, т.е описание коммита


## Интеграция с GITHUB

Регистрируемся если ранее этого не сделали  
Создаем репозитория на GITHUB (без файлов)  
На странице будут готовые команды для подключения  
`git remote add origin git@github.com:<имя на гитхабе>/git-lesson.git`  
`git branch -M main`  
`git push -u origin main`  

Команда для клонирования репозитория `git clone "ссылка с гитхаба"`  
Команда для скачивания изменений с гита `git pull --rebase`  


## Рабочая директория

Удаляем файл  
`rm PEOPLE.md`  
`git add PEOPLE.md`  
ИЛИ rm+add `git rm PEOPLE.md`

Восстанавливаем файл `git restore PEOPLE.md`


## Анализ сделанных изменений

Показать разницу между тем, что было и тем, что стало `git diff`  
Пейджер:  
*f - перемещение вниз*
*b или u - перемещение вверх*
*q - выход*

Показать изменения в файлах добавленных в индекс `git diff --staged`


## Анализ истории и изменений

История коммитов `git log`  
История с отображением диффов `git log -p`  
Вверх и вниз *f* и *b*

Найти коммит по идентификатору `git show <7 первых символов хэша>`  
Узнать кто последним менял файл `git blame INFO.md`

Ищем совпадение с указанной строкой `git grep <текст>`  
Без учета регистра применяем *-i* `git grep -i <текст>`  
Поиск в конкретном коммите `git grep -i lesson 5120bca`  
Поиск по всей истории, возвращаем список всех хэшей коммитов в rev list `git grep Lesson $(git rev-list --all)`
